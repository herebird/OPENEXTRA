apt-get update && apt-get -y install mysql-server

mysql_secure_installation

chown -R mysql:mysql /var/lib/mysql/ && chmod -R 755 /var/lib/mysql/

apt-get -y install nginx php5 php5-fpm php5-cli php5-mysql php5-mcrypt

rm /etc/nginx/sites-enabled/default && rm /etc/nginx/sites-available/default
mv /etc/nginx/nginx.conf /etc/nginx/nginx.conf.backup
mv /etc/nginx/conf.d/vps.conf /etc/nginx/conf.d/vps.conf.backup
cat > /etc/nginx/nginx.conf <<END
user www-data;

worker_processes 1;
pid /var/run/nginx.pid;

events {
        multi_accept on;
  worker_connections 1024;
}

http {
        gzip on;
        gzip_vary on;
        gzip_comp_level 5;
        gzip_types    text/plain application/x-javascript text/xml text/css;

        autoindex on;
  sendfile on;
  tcp_nopush on;
  tcp_nodelay on;
  keepalive_timeout 65;
  types_hash_max_size 2048;
  server_tokens off;
  include /etc/nginx/mime.types;
  default_type application/octet-stream;
  access_log /var/log/nginx/access.log;
  error_log /var/log/nginx/error.log;
  client_max_body_size 32M;
        client_header_buffer_size 8m;
        large_client_header_buffers 8 8m;

        fastcgi_buffer_size 8m;
        fastcgi_buffers 8 8m;

        fastcgi_read_timeout 600;

  include /etc/nginx/conf.d/*.conf;
}
END

cat > /etc/nginx/conf.d/vps.conf <<END
server {
  listen       81;
  server_name  127.0.0.1 localhost;
  access_log /var/log/nginx/vps-access.log;
  error_log /var/log/nginx/vps-error.log error;
  root   /home/vps/public_html;

  location / {
    index  index.html index.htm index.php;
    try_files $uri $uri/ /index.php?$args;
  }

  location ~ \.php$ {
    include /etc/nginx/fastcgi_params;
    fastcgi_pass  127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
  }
}
END
sed -i 's/cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/g' /etc/php5/fpm/php.ini
sed -i 's/listen = \/var\/run\/php5-fpm.sock/listen = 127.0.0.1:9000/g' /etc/php5/fpm/pool.d/www.conf
useradd -m vps && mkdir -p /home/vps/public_html
echo "<?php phpinfo() ?>" > /home/vps/public_html/info.php
chown -R www-data:www-data /home/vps/public_html && chmod -R g+rw /home/vps/public_html
service php5-fpm restart && service nginx restart

mysql -u root -p
CREATE DATABASE IF NOT EXISTS OCSREBORN;EXIT;

apt-get -y install git
cd /home/vps/public_html
git init
git remote add origin https://github.com/rzengineer/Ocs-Panel-Reborns.git
git pull origin master
chmod 777 /home/vps/public_html/application/config/database.php

nano /home/vps/public_html/application/config/database.php
$db['default']['username'] = "k6162467_db1";
$db['default']['password'] = "ok123!";
$db['default']['database'] = "k6162467_demo";

nano /home/vps/public_html/application/config/config.php
$config[‘base_url’] = “http://ip:81”;


http://ip:81/install

rm -rf /home/vps/public_html/install
